!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function l(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,e=void 0,r=void 0,a=function(t,e){d[i]=t,d[i+1]=e,2===(i+=2)&&(r?r(p):g())};var t="undefined"!=typeof window?window:void 0,s=t||{},o=s.MutationObserver||s.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(p,1)}}var d=new Array(1e3);function p(){for(var t=0;t<i;t+=2){(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0}i=0}var f,m,v,y,g=void 0;function b(t,e){var n=this,i=new this.constructor(j);void 0===i[w]&&L(i);var r=n._state;if(r){var s=arguments[r-1];a(function(){return A(r,i,s,n._result)})}else I(n,i,t,e);return i}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(j);return x(e,t),e}c?g=function(){return process.nextTick(p)}:o?(m=0,v=new o(p),y=document.createTextNode(""),v.observe(y,{characterData:!0}),g=function(){y.data=m=++m%2}):u?((f=new MessageChannel).port1.onmessage=p,g=function(){return f.port2.postMessage(0)}):g=void 0===t&&"function"==typeof require?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:h()}catch(t){return h()}}():h();var w=Math.random().toString(36).substring(2);function j(){}var C=void 0,k=1,S=2,T={error:null};function D(t){try{return t.then}catch(t){return T.error=t,T}}function $(t,e,n){var i,r,s,o;e.constructor===t.constructor&&n===b&&e.constructor.resolve===_?(s=t,(o=e)._state===k?Q(s,o._result):o._state===S?P(s,o._result):I(o,void 0,function(t){return x(s,t)},function(t){return P(s,t)})):n===T?(P(t,T.error),T.error=null):void 0===n?Q(t,e):l(n)?(i=e,r=n,a(function(e){var n=!1,t=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(r,i,function(t){n||(n=!0,i!==t?x(e,t):Q(e,t))},function(t){n||(n=!0,P(e,t))},e._label);!n&&t&&(n=!0,P(e,t))},t)):Q(t,e)}function x(t,e){var n,i;t===e?P(t,new TypeError("You cannot resolve a promise with itself")):(i=typeof(n=e),null===n||"object"!==i&&"function"!==i?Q(t,e):$(t,e,D(e)))}function M(t){t._onerror&&t._onerror(t._result),E(t)}function Q(t,e){t._state===C&&(t._result=e,t._state=k,0!==t._subscribers.length&&a(E,t))}function P(t,e){t._state===C&&(t._state=S,t._result=e,a(M,t))}function I(t,e,n,i){var r=t._subscribers,s=r.length;t._onerror=null,r[s]=e,r[s+k]=n,r[s+S]=i,0===s&&t._state&&a(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,s=t._result,o=0;o<e.length;o+=3)i=e[o],r=e[o+n],i?A(n,i,r,s):r(s);t._subscribers.length=0}}function A(t,e,n,i){var r=l(n),s=void 0,o=void 0,a=void 0,c=void 0;if(r){if((s=function(t,e){try{return t(e)}catch(t){return T.error=t,T}}(n,i))===T?(c=!0,o=s.error,s.error=null):a=!0,e===s)return void P(e,new TypeError("A promises callback cannot return that same promise."))}else s=i,a=!0;e._state!==C||(r&&a?x(e,s):c?P(e,o):t===k?Q(e,s):t===S&&P(e,s))}var F=0;function L(t){t[w]=F++,t._state=void 0,t._result=void 0,t._subscribers=[]}var O=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(j),this.promise[w]||L(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?Q(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&Q(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===C&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===_){var r=D(e);if(r===b&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===z){var s=new n(j);$(s,e,r),this._willSettleAt(s,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},t.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===C&&(this._remaining--,t===S?P(i,n):this._result[e]=n),0===this._remaining&&Q(i,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(k,e,t)},function(t){return n._settledAt(S,e,t)})},t}();var z=function(){function e(t){this[w]=F++,this._result=this._state=void 0,this._subscribers=[],j!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){x(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})},e}();return z.prototype.then=b,z.all=function(t){return new O(this,t).promise},z.race=function(r){var s=this;return n(r)?new s(function(t,e){for(var n=r.length,i=0;i<n;i++)s.resolve(r[i]).then(t,e)}):new s(function(t,e){return e(new TypeError("You must pass an array to race."))})},z.resolve=_,z.reject=function(t){var e=new this(j);return P(e,t),e},z._setScheduler=function(t){r=t},z._setAsap=function(t){a=t},z._asap=a,z.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=z},(z.Promise=z).polyfill(),z});var __extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();define("helpers/helper",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function n(){}return n.dataClick=function(t){return t.getAttribute("data-click")},n.clickHandler=function(t){for(var e=t;null!=e&&!n.dataClick(e);)e=e.parentElement;return e},n}();e.CDom=n;var i=function(){function i(){}return i.repeat=function(t,e){for(var n=[];0<e;)n.push(t);return n.join("")},i.padStart=function(t,e,n){return e>>=0,n=String(void 0!==n?n:" "),t.length>e?String(t):((e-=t.length)>n.length&&(n+=i.repeat(n,e/n.length)),n.slice(0,e)+String(t))},i.split1Date=function(t){var e=t.split("-"),n={month:"",day:""};if(3!=e.length)throw new Error("Error String.split1Date format (nnnn-nn-nn): value "+t);return n.month=e[0]+"-"+e[1],n.day=e[2],n},i.splitDate=function(t){var e=t.split("-"),n={year:0,month:0,day:0};if(3!=e.length)throw new Error("Error String.splitDate format (nnnn-nn-nn): value "+t);return n.year=parseInt(e[0],10),n.month=parseInt(e[1],10)-1,n.day=parseInt(e[2],10),n},i}();e.CString=i;var r=function(){function n(){}return n.getKey=function(t){var e=i.padStart(t.getMonth()+1+"",2,"0"),n=i.padStart(t.getDate()+"",2,"0");return t.getFullYear()+"-"+e+"-"+n},n.getFrenchDay=function(t){var e=t.getDay(),n=0==e?7:e;return--n},n.getFrenchFirstDay=function(t){var e=new Date(t.getFullYear(),t.getMonth(),1,4);return n.getFrenchDay(e)},n.getFrenchWeekInMonth=function(t){return Math.floor((t.getDate()+n.getFrenchFirstDay(t)-1)/7)},n}();e.CDate=r}),define("calendar/view",["require","exports","helpers/helper"],function(t,e,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._container=t,this.monthsContainer=jQuery("<div class='sf-months-container'></div>")}return Object.defineProperty(t.prototype,"header",{get:function(){var t=[];return t.push('<div class="sf-calendar-buttons">'),t.push('<div class="sf-button-previous" data-click="previous-group"><i class="sf-icon-angle-double-left"></i></div>'),t.push('<div class="sf-button-previous-month"  data-click="previous-month"><i class="sf-icon-angle-left"></i></div>'),t.push('<div class="sf-button-next-month"  data-click="next-month"><i class="sf-icon-angle-right"></i></div>'),t.push('<div class="sf-button-next"  data-click="next-group"><i class="sf-icon-angle-double-right"></i></div>'),t.push("</div>"),jQuery(t.join(""))},enumerable:!0,configurable:!0}),t.prototype.footer=function(t){var e=jQuery("<div class='sf-calendar-footer'></div>");for(var n in e.append("<div class='sf-calendar-legend'><div class='sf-rented sf-icon-legend'></div>Non disponible</div>"),e.append("<div class='sf-calendar-legend'><div class='sf-notinit sf-icon-legend'></div>Ferm√©</div>"),t){var i="sf-"+n;e.append('<div class="sf-calendar-legend"><div class="'+i+' sf-icon-legend"></div>'+t[n]+"</div>")}return e},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),t.prototype.draw=function(t,e){this.container.append(this.header),this.container.append(this.monthsContainer),this.container.append(this.footer(e)),this.monthContentDraw(t)},t.prototype.monthContentDraw=function(t){for(var e in this.monthsContainer.empty(),t){var n=parseInt(e.split("-")[0],10),i=parseInt(e.split("-")[1],10);this.monthsContainer.append(this.buildMonth(n,i,t[e]))}},t.prototype.buildMonth=function(t,e,n){var i=this.monthLabel(t,e),r=jQuery('<div class="sf-layout-month">');r.append('<div class="sf-header-month">'+i+"</div>");var s=jQuery('<table class="sf-month-content" cellspacing="0"></div>');s.append("<tr><th>Lun</th><th>Mar</th><th>Mer</th><th>Jeu</th><th>Ven</th><th>Sam</th><th>Dim</th></tr>"),r.append(s);for(var o,a=-1,c=[],l=[],u=n.length,h=0;h<u;h++){var d=new Date(t,e-1,parseInt(n[h].day,10),4);a!=p.CDate.getFrenchWeekInMonth(d)&&(o="",c=this.initWeek(),l.push(c),a=p.CDate.getFrenchWeekInMonth(d)),o=parseInt(n[h].day,10)+"",c[p.CDate.getFrenchDay(d)+1]=this.htmlDay(o,n[h].data)}for(;l.length<6;)l.push(this.initWeek());return s.append(jQuery(l.join(""))),r},t.prototype.initWeek=function(){return["<tr>",this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),"</tr>"]},t.prototype.htmlDay=function(t,e){var n="",i=e.rent&&!e.start||e.rent&&e.start&&e.end,r=e.rent&&!e.end||e.rent&&e.start&&e.end,s="sf-calendar-day-morning "+(i?"sf-rented":e.typeMorning),o="sf-calendar-day-afternoon "+(r?"sf-rented":e.typeAfternoon);return n='<td class="sf-calendar-day'+(i&&r||" sf-notinit"==e.typeMorning&&" sf-notinit"==e.typeAfternoon?" sf-notfree":"")+'">',n+=t,n+='<div class="'+s+'"></div>',n+='<div class="'+o+'"></div>',n+="</td>"},t.prototype.monthLabel=function(t,e){return["Janvier","F&eacute;vrier","Mars","Avril","Mai","Juin","Juillet","Ao&ucirc;t","Septembre","Octobre","Novembre","D&eacute;cembre"][e-1]+" "+t},t}();e.CrView=n}),define("calendar/model",["require","exports","helpers/helper","helpers/helper"],function(t,e,l,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.dataid=t,this._dataRoot=e,this._periods=null,this._availabilities=null,this._data=null,this._lastKey=""}return Object.defineProperty(t.prototype,"lastKey",{get:function(){return this._lastKey},enumerable:!0,configurable:!0}),t.prototype.getPeriods=function(n){var i=this;try{return new Promise(function(e,t){i._periods?e():jQuery.getJSON(n,function(t){i._periods=t[i.dataid]||t,e()}).fail(function(){return t("Periods")})})}catch(t){throw Error("Promise")}},t.prototype.getAvailabilities=function(n){var i=this;try{return new Promise(function(e,t){i._availabilities?e():jQuery.getJSON(n,function(t){i._availabilities=t[i.dataid]||t,e()}).fail(function(){return t("Availabilities")})})}catch(t){throw Error("Promise")}},t.prototype.getLegend=function(n){var i=this;try{return new Promise(function(e,t){jQuery.getJSON(n,function(t){e(t[i.dataid]||t)}).fail(function(){return t("Legend")})})}catch(t){throw Error("Promise")}},t.prototype.data=function(t,e){return this._data||(this._data={},this.buildPeriods(),this.buildAvailabilities()),this.dataReduce(t,e)},t.prototype.dataReduce=function(t,e){var n,i={},r=new Date(t.year,t.month,1,5),s=new Date(t.year,t.month+e,0,5),o=h.CDate.getKey(r),a=h.CDate.getKey(s);for(var c in this._data)o<=c&&c<=a&&(i[(n=l.CString.split1Date(c)).month]=i[n.month]||[],i[n.month].push({day:n.day,data:this._data[c]}));return i},Object.defineProperty(t.prototype,"datas",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.buildPeriods=function(){var l=this,u="",t=function(c){l._periods[c].forEach(function(t){for(var e=new Date(parseInt(c,10),parseInt(t.start.split("-")[0],10)-1,parseInt(t.start.split("-")[1],10)),n=new Date(parseInt(c,10),parseInt(t.start.split("-")[0],10)-1,parseInt(t.start.split("-")[1],10)),i=new Date(parseInt(c,10),parseInt(t.end.split("-")[0],10)-1,parseInt(t.end.split("-")[1],10)),r=h.CDate.getKey(new Date);e.getTime()<=i.getTime();){var s=h.CDate.getKey(e);u<s&&(u=s),l._data[s]=l._data[s]||{};var o=e.getTime()==n.getTime(),a=e.getTime()==i.getTime();r<s?(l._data[s].typeMorning=(l._data[s].typeMorning?l._data[s].typeMorning:"")+(!o||o&&a?" sf-"+t.type:""),l._data[s].typeAfternoon=(l._data[s].typeAfternoon?l._data[s].typeAfternoon:"")+(!a||o&&a?" sf-"+t.type:"")):(l._data[s].overDate=!0,l._data[s].rent=!0),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}})};for(var e in l._periods)t(e);l._lastKey=u},t.prototype.buildAvailabilities=function(){var o=this,t=function(s){o._availabilities[s].forEach(function(t){for(var e=new Date(parseInt(s,10),parseInt(t.start.split("-")[0],10)-1,parseInt(t.start.split("-")[1],10)),n=new Date(parseInt(s,10),parseInt(t.end.split("-")[0],10)-1,parseInt(t.end.split("-")[1],10)),i=e;e.getTime()<=n.getTime();){var r=h.CDate.getKey(e);o._data[r]=o._data[r]||{},o._data[r].rent=!0,o._data[r].overDate||(i.getTime()==e.getTime()&&(o._data[r].start=!0),n.getTime()==e.getTime()&&(o._data[r].end=!0)),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}})};for(var e in o._availabilities)t(e)},t}();e.CrModel=n}),define("calendar/messages",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.messagesfr={Header:"Le calendrier ne peut pas √™tre affich√©.",Promise:["Votre navigateur ne prend pas en charge certaines fonctionnalit√©s indispensables.","Merci d'utiliser un navigateur plus r√©cent."],Availabilities:["Disponibilit√©s non trouv√©es","V√©rifiez les param√®tres du composant (data-params)"],Periods:["Periodes non trouv√©es.","V√©rifiez les param√®tres du composant (data-params)"],Legend:["L√©gende non trouv√©e.","V√©rifiez les param√®tres du composant (data-params)"]}}),define("helpers/message",["require","exports","helpers/helper"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.$frame=jQuery('<div class="sf-message-box"></div>')}return t.prototype.messsageBoxList=function(){return jQuery(".sf-message-box")},t.prototype.error=function(t,e){this.$frame.addClass("sf-error"),this.show(this.message(t,e))},t.prototype.info=function(t,e){this.$frame.addClass("sf-info"),this.show(this.message(t,e?new Error(e):void 0))},t.prototype.message=function(t,e){var n,i,r,s,o;return s=null!=(r=t)&&void 0!==r.header&&null!==r.header&&"string"==typeof r.header,o=void 0!==r.message&&null!==r.message&&r.message instanceof Array,s&&o?i=t:(n=t[(e=e||new Error("unknonwn")).message]||new Array(e.message),i={header:t.Header,message:n}),i},t.prototype.show=function(t){var e=this.messsageBoxList().length;this.$frame.css("z-index",1e3+e);this.header(t.header);var n=jQuery('<div class="sf-message-content"></div>'),i="";t.message.forEach(function(t){i+='<div class="sf-message-line">'+t+"</div>"}),n.append(jQuery(i)),this.$frame.append(this.header(t.header)),this.$frame.append(n);var r=jQuery("body");r.append(this.$frame);var s=this.$frame.width()||0,o=((r.width()||s)-s)/2;this.$frame.css("left",o+20*e+"px"),this.$frame.css("top",20+40*e+"px"),this.triggerEvent()},t.prototype.triggerEvent=function(){var e=this,t=this.$frame.get(0);t&&t.addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;if(e=n.CDom.clickHandler(e))switch(n.CDom.dataClick(e)){case"message-close":this.destroy()}},t.prototype.header=function(t){var e='<div class="sf-message-header"><div class="sf-message-title">'+t+"</div>";return e+='<div class="sf-close-popup" data-click="message-close"><i class="sf-icon-cancel"></i></div>',e+="</div>",jQuery(e)},t.prototype.destroy=function(){var e=this,t=document.getElementById("sf-message");t&&t.removeEventListener("click",function(t){return e.click(t)},!1),this.$frame.remove()},t}();e.CMessage=i,e.showError=function(t,e){(new i).error(t,e)},e.showInfo=function(t){(new i).info(t)}}),define("calendar/controller",["require","exports","calendar/view","calendar/model","calendar/messages","helpers/message","helpers/helper","helpers/helper","helpers/helper"],function(t,e,n,i,r,s,o,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){this.params=e,this.monthCount=e.monthCount,this.start={year:(new Date).getFullYear(),month:(new Date).getMonth()},this.model=new i.CrModel(e.dataid,e.dataRoot),this.view=new n.CrView(t),t.removeAttr("data-params")}return t.prototype.previousGroup=function(){var t=new Date(this.start.year,this.start.month-this.monthCount,1,5);this.start=this.computePreviousStart(t),this.refresh()},t.prototype.previousMonth=function(){var t=new Date(this.start.year,this.start.month-1,1,5);this.start=this.computePreviousStart(t),this.refresh()},t.prototype.computePreviousStart=function(t){var e=new Date,n=t.getTime()<e.getTime()?e:t,i={year:0,month:0};return i.year=n.getFullYear(),i.month=n.getMonth(),i},t.prototype.nextGroup=function(){var t=new Date(this.start.year,this.start.month+this.monthCount,1,4);this.start=this.computeNextStart(t),this.refresh()},t.prototype.nextMonth=function(){var t=new Date(this.start.year,this.start.month+1,1,4);this.start=this.computeNextStart(t),this.refresh()},t.prototype.computeNextStart=function(t){var e={year:0,month:0},n=this.model.lastKey,i=o.CString.splitDate(n),r=new Date(i.year,i.month+1-this.monthCount,1,4),s=t.getTime()<r.getTime()?t:r;return e.year=s.getFullYear(),e.month=s.getMonth(),e},t.prototype.triggerEvents=function(){var e=this,t=this.view.container.get(0);t&&t.addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;if(e=a.CDom.clickHandler(e))switch(a.CDom.dataClick(e)){case"previous-group":this.previousGroup();break;case"previous-month":this.previousMonth();break;case"next-month":this.nextMonth();break;case"next-group":this.nextGroup()}},t.prototype.dataLocation=function(t){return""+this.params.dataRoot+t+"?"+(new Date).getTime()},t.prototype.show=function(){var e,t=this,n=this;try{n.model.getPeriods(this.dataLocation(this.params.periods)).then(function(){return n.model.getAvailabilities(t.dataLocation(t.params.availabilities))}).then(function(){return e=n.model.data(n.start,n.monthCount),n.model.getLegend(t.dataLocation(t.params.legend))}).then(function(t){n.view.draw(e,t),n.triggerEvents()}).catch(function(t){(new s.CMessage).error(r.messagesfr,Error(t))})}catch(t){(new s.CMessage).error(r.messagesfr,t)}},t.prototype.dayArrivalSelectable=function(t){var e=this.getDateConfigDay(t),n=!e.overDate&&(!e.rent||!e.start&&e.end);return[n,n?e.typeAfternoon:"",""]},t.prototype.dayDepartureSelectable=function(t){var e=this.getDateConfigDay(t),n=!e.overDate&&(!e.rent||!e.end&&e.start);return[n,n?e.typeMorning:"",""]},t.prototype.getDateConfigDay=function(t){return this.model.datas[c.CDate.getKey(t)]},t.prototype.refresh=function(){var t=this.model.dataReduce(this.start,this.monthCount);this.view.monthContentDraw(t)},t}();e.CrCalendar=l,e.calendarFactory=function(){jQuery(".sf-calendar").each(function(t,e){var n=jQuery(e),i=n.data("params");new l(n,i).show()})},e.calendar=function(t){var e=jQuery("#"+t);if(0==e.length)return null;var n=e.data("params"),i=new l(e,n);return i.show(),i}}),define("slideShow/model",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._data=[],this._imageRoot=t}return t.prototype.requestdata=function(n,i,r){var s=this;try{return new Promise(function(t,e){s.updateData(t,e,n,i,r)})}catch(t){throw Error("Promise")}},t.prototype.updateData=function(e,t,n,i,r){var s=this;i?jQuery.getJSON(i+"?"+(new Date).getTime(),function(t){s._data=n?s.setImagesUrl(t[n]):s.setImagesUrl(t),e(s.data)}).fail(function(){return t("slideShow")}):r?s._data=n?s.setImagesUrl(r[n]):s.setImagesUrl(r):t("slideShow")},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.data.length},enumerable:!0,configurable:!0}),t.prototype.setImagesUrl=function(t){var e=this;return t.map(function(t){return t.url=e._imageRoot+t.name,t})},t}();e.CSModel=n}),define("slideShow/view",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._$container=t,this._$slide=jQuery(""),this._$thumbnails=jQuery(""),this._$thumbnailContainer=jQuery(""),this._$thumbnailsRow=jQuery(""),this._params={showCaption:!0,showThumbnail:!0,current:0}}return t.prototype.draw=function(t,e){if(this._$slide.empty(),this._$thumbnails.empty(),this._params=t,this._$slide=this.buildSlide(e[this._params.current],this._params.current,e.length,this._params.showCaption),this._$container.append(this._$slide),this._params.showThumbnail){this._$thumbnails=this.buildThumbnails(this._params.current,e),this._$container.append(this._$thumbnails);var n=jQuery(".sf-slide-thumbnail-column",this._$thumbnailsRow).width()||0;this._$thumbnailsRow.width(n*e.length+2*e.length)}},Object.defineProperty(t.prototype,"container",{get:function(){return this._$container},enumerable:!0,configurable:!0}),t.prototype.getThumbnailPosition=function(t){return jQuery('.sf-slide-thumbnail-column[data-index="'+t+'"]',this._$thumbnails).position().left},t.prototype.getThumbnailWidth=function(t){return jQuery('.sf-slide-thumbnail-column[data-index="'+t+'"]',this._$thumbnails).width()||0},t.prototype.isThumbnailVisible=function(t){var e=!0,n=this.getThumbnailPosition(t),i=this.getThumbnailWidth(t);return(n<Math.abs(this.rowLeft)||n+i>Math.abs(this.rowLeft)+this.containerWidth)&&(e=!1),e},t.prototype.showThumbNail=function(t){if(this._params.showThumbnail&&!this.isThumbnailVisible(t)){var e=Math.max(this.centerThumbnail(t),0);return e=Math.min(e,this.rowWidth-this.containerWidth),this.rowLeft=-e,-e}return this.rowLeft},t.prototype.centerThumbnail=function(t){var e=this.getThumbnailPosition(t);return e=e+this.getThumbnailWidth(t)/2-this.containerWidth/2},t.prototype.moveThumbNails=function(t){if(!this._params.showThumbnail)return 0;var e=this.containerWidth,n=this.rowLeft,i=0;return t?(Math.abs(n)+e+this.containerWidth>this.rowWidth&&(e=this.rowWidth+n-this.containerWidth),i=n-e):(0<=n+e&&(e=n=0),i=n+e),this.rowLeft=i},t.prototype.refresh=function(t,e,n){var i=this._params.showCaption,r=this._params.showThumbnail,s=jQuery("img.sf-img-slide-0",this._$slide),o=jQuery("img.sf-img-slide-1",this._$slide),a=s,c=o;"0"==s.css("opacity")&&(a=o,c=s),c.attr("src",t.url),c.css("opacity",1),a.css("opacity",0),jQuery(".sf-numbertext",this._$slide).html(this.formatNumberText(n,e)),i&&jQuery(".sf-slide-caption",this._$slide).html(t.caption),r&&(jQuery(".sf-slide-thumbnail-column",this._$thumbnails).removeClass("sf-current"),jQuery('.sf-slide-thumbnail-column[data-index="'+n+'"]',this._$thumbnails).addClass("sf-current"))},t.prototype.buildSlide=function(t,e,n,i){var r='<div class="sf-slide">'+this.slideContent(t,e,n,i)+"</div>";return jQuery(r)},t.prototype.formatNumberText=function(t,e){return t+1+"/"+e},t.prototype.slideContent=function(t,e,n,i){var r='<div class="sf-img-container-slide"><img class="sf-img-slide-0" src="'+t.url+'">';return r+='<img style="opacity:0" class="sf-img-slide-1" src="'+t.url+'"></div>',r+='<div class="sf-numbertext">'+this.formatNumberText(e,n)+"</div>",r+='<div class="sf-slide-btn-left" data-click="slide-left" style="visibility:hidden"></div>',r+='<div class="sf-slide-btn-right" data-click="slide-right" style="visibility:hidden"></div>',i&&(r+='<div class="sf-slide-caption">'+t.caption+"</div>"),r},t.prototype.buildThumbnails=function(n,t){var i=this,e=jQuery('<div class="sf-thumbnail"></div>');return e.append(this.thumbnailButtons()),this._$thumbnailContainer=jQuery('<div class="sf-thumbnail-container"></div>'),this._$thumbnailsRow=jQuery('<div class="sf-slide-thunbnail-row"></div>'),t.forEach(function(t,e){i._$thumbnailsRow.append(i.buildThumbnail(t,e,n))}),this._$thumbnailContainer.append(i._$thumbnailsRow),e.append(this._$thumbnailContainer),e},Object.defineProperty(t.prototype,"rowWidth",{get:function(){return this._params.showThumbnail&&this._$thumbnailsRow.width()||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowLeft",{get:function(){if(!this._params.showThumbnail)return 0;var t=parseFloat(this._$thumbnailsRow.css("left"));return t<0&&(t-=.01),t},set:function(t){this._params.showThumbnail&&this._$thumbnailsRow.css("left",t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"containerWidth",{get:function(){return this._params.showThumbnail&&this._$thumbnailContainer.width()||0},enumerable:!0,configurable:!0}),t.prototype.buildThumbnail=function(t,e,n){var i='<div class="sf-slide-thumbnail-column '+(n==e?"current":"")+'"';return i+=' data-click="thumbnail" data-index='+e+' title="'+t.caption+'" alt="'+t.caption+'"',i+=' style="background-image:url('+t.url+')">',jQuery(i)},t.prototype.thumbnailButtons=function(){return'<div class="sf-thumbnail-btn-left" data-click="thumbnails-left" style="visibility:hidden"><i class="sf-icon-angle-left"></i></div>','<div class="sf-thumbnail-btn-right" data-click="thumbnails-right" style="visibility:hidden"><i class="sf-icon-angle-right"></i></div>',"</div>",jQuery('<div class="sf-thumbnail-btns"><div class="sf-thumbnail-btn-left" data-click="thumbnails-left" style="visibility:hidden"><i class="sf-icon-angle-left"></i></div><div class="sf-thumbnail-btn-right" data-click="thumbnails-right" style="visibility:hidden"><i class="sf-icon-angle-right"></i></div></div>')},t.prototype.thumbnailBtnsVisibility=function(t,e){this._params.showThumbnail&&(jQuery(".sf-thumbnail-btn-left",this._$thumbnails).css("visibility",t),jQuery(".sf-thumbnail-btn-right",this._$thumbnails).css("visibility",e))},t.prototype.slideBtnsVisibility=function(t,e){jQuery(".sf-slide-btn-left",this._$slide).css("visibility",t),jQuery(".sf-slide-btn-right",this._$slide).css("visibility",e)},t}();e.CSlideView=n}),define("slideShow/messages",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.messagesfr={Header:"Le slider ne peut pas √™tre affich√©.",Promise:["Votre navigateur ne prend pas en charge certaines fonctionnalit√©s indispensables.","Merci d'utiliser un navigateur plus r√©cent."],slideShow:["Impossible de trouver la liste des images √† afficher.","V√©rifiez les param√®tres du composant (data-params)"]}}),define("slideShow/controller",["require","exports","slideShow/view","slideShow/model","slideShow/messages","helpers/message","helpers/helper"],function(t,e,n,i,r,s,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){this._currentIndex=0,this._id=t.attr("id")||"",this._params=e,this._view=new n.CSlideView(t),this._model=new i.CSModel(this._params.imageRoot),t.removeAttr("data-params")}return t.prototype.triggerEvents=function(){var e=this,t=this._view.container.get(0);t&&t.addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;if(e=o.CDom.clickHandler(e))switch(o.CDom.dataClick(e)){case"slide-left":this.clickSlideBtns(-1);break;case"slide-right":this.clickSlideBtns(1);break;case"thumbnails-right":this.clickThumbernailBtns(!0);break;case"thumbnails-left":this.clickThumbernailBtns(!1);break;case"thumbnail":this.clickThumbnail(parseInt(e.getAttribute("data-index")||"0",10))}},t.prototype.clickSlideBtns=function(t){var e=this._currentIndex;e+=t,this.changeSlide(e);var n=this._view.showThumbNail(e);this.btnsState(n)},t.prototype.clickThumbnail=function(t){this.changeSlide(t),this.btnsState(this._view.rowLeft)},t.prototype.clickThumbernailBtns=function(t){var e;e=this._view.moveThumbNails(t),this.btnsState(e)},t.prototype.btnsState=function(t){var e=0<=t?"hidden":"visible",n=-t+this._view.containerWidth>=this._view.rowWidth?"hidden":"visible";this._view.thumbnailBtnsVisibility(e,n),e=0==this._currentIndex?"hidden":"visible",n=this._currentIndex==this._model.length-1?"hidden":"visible",this._view.slideBtnsVisibility(e,n)},t.prototype.changeSlide=function(t){this._currentIndex=Math.max(t,0)&&Math.min(t,this._model.length-1),this._view.refresh(this._model.data[this._currentIndex],this._model.length,this._currentIndex)},t.prototype.show=function(){var n=this;try{n._model.requestdata(n._params.dataid,n._params.dataLocation).then(function(t){var e={current:0,showThumbnail:n._params.showThumbnail,showCaption:n._params.showCaption};n._view.draw(e,t),n.triggerEvents(),n.btnsState(0)}).catch(function(t){(new s.CMessage).error(r.messagesfr,Error(t))})}catch(t){(new s.CMessage).error(r.messagesfr,t)}},t}();e.CSlideShow=a,e.slideShowFactory=function(){jQuery(".sf-slideShow").each(function(t,e){var n=jQuery(e),i=n.data("params");new a(n,i).show()})},e.slideShow=function(t){var e=jQuery("#"+t);if(0<e.length){var n=e.data("params");new a(e,n).show()}}}),define("tabsection/controller",["require","exports","helpers/helper"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.$sectionList=jQuery("."+e),this.$container=jQuery('<div class="'+e+'-tabs"></div>')}return Object.defineProperty(t.prototype,"list",{get:function(){return this.$sectionList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.$container},enumerable:!0,configurable:!0}),t.prototype.triggerEvents=function(){var e=this;this.container.get(0).addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;(e=n.CDom.clickHandler(e))&&this.doClick(e)},t.prototype.doClick=function(t){"tab"===n.CDom.dataClick(t)&&this.clickTab(jQuery(t).data("index"))},t.prototype.clickTab=function(t){var e=parseInt(t,10)||0,n=jQuery(this.list[e]),i=parseInt(n.css("margin-top"),10)+parseInt(n.css("padding-top"),10),r=n.offset(),s=(this.container&&this.container.height()||0)+6;this.scrollTo(r.top-s+i-2)},t.prototype.scrollTo=function(t){jQuery("body, html").animate({scrollTop:t},700)},t}(),r=function(o){function t(t,e){void 0===e&&(e="sf-panel");var n=o.call(this,t,e)||this;if(n.panelClosed=!1,n.buttonSize=30,n.linkSizeMin=90,n.top=0,1<=n.$sectionList.length){jQuery(document.body).append(n.container);var i=n.getParams(t);n.linkSizeMin=i.minSize;var r=n.buildTabs(e,i);n.container.append(r),n.top=(n.container&&n.container.height()||0)+6;var s=n.paddingRight(r,i.scrollTop,i.close);r.css("padding-right",s+"px"),n.triggerEvents()}return n.scroll(),n}return __extends(t,o),t.prototype.buildTabs=function(i,t){var r=this,s="",o=this.widths(),e="";return this.buttonSize&&(e='style="width:'+this.buttonSize+'px" '),this.list.each(function(t,e){var n=r.caption(e);s+=r.link(i,n,t,o),t}),t.scrollTop&&(0,s+='<li class="'+i+'-tab sf-btn-panel" '+e+' data-click="scrollTop"><span style="width:'+this.buttonSize+'px" class="sf-tab-scrollTop sf-icon-up-circled"></span></li>'),t.close&&(0,s+='<li class="'+i+'-tab sf-btn-panel" '+e+' data-click="close"><span style="width:'+this.buttonSize+'px" class="sf-tab-close sf-icon-cancel-circled"></span></li>'),jQuery('<div class="'+i+'-tabs-panel"><ul class="sf-tabs">'+s+"</ul></div>")},t.prototype.link=function(t,e,n,i){return'<li class="'+t+'-tab" '+('style="width:'+100*i.width[n]/i.total+'%"')+' data-click="tab" data-index="'+n+'"><span '+('style="width:'+i.width[n]+'px"')+' class="sf-tab-text">'+e+"</span></li>"},t.prototype.getParams=function(t){var e={scrollTop:!1,close:!1,minSize:this.linkSizeMin,css:""};return t&&(e.scrollTop=!!t&&t.scrollTop,e.close=!!t&&t.close,e.minSize=t.minSize?t.minSize:this.linkSizeMin),e},t.prototype.triggerEvents=function(){var e=this;o.prototype.triggerEvents.call(this),window.addEventListener("scroll",function(t){return e.scroll()},!1)},t.prototype.doClick=function(t){switch(o.prototype.doClick.call(this,t),n.CDom.dataClick(t)){case"close":this.panelClosed=!0,this.hide();break;case"scrollTop":this.scrollTo(0)}},t.prototype.caption=function(t){var e=jQuery(t);return e.data("params")&&e.data("params").caption||e.text()},t.prototype.scroll=function(){20<document.body.scrollTop||20<document.documentElement.scrollTop?this.panelClosed||this.show():(this.panelClosed=!1,this.hide())},t.prototype.widths=function(){var r=this,s={width:[],total:0};return this.list.each(function(t,e){var n=jQuery(e),i=n.data("params")&&n.data("params").caption||n.text();s.width.push(r.captionSize(i)),s.total+=s.width[t]}),s},t.prototype.paddingRight=function(t,e,n){var i=parseInt(t.css("padding-left"),10)+this.$sectionList.length-1;return e&&(i+=this.buttonSize+1),n&&(i+=this.buttonSize+1),i},t.prototype.captionSize=function(t){var e=jQuery('<span id="sf-sizing"style="width:auto;box-sizing: border-box;" class="sf-tab-text">'+t+"</span>");jQuery(document.body).append(e);var n=Math.max((e.width()||0)+2,this.linkSizeMin);return e.remove(),n},t.prototype.hide=function(){0<=this.container.position().top&&(this.container.get(0).style.top="-"+this.top+"px")},t.prototype.show=function(){this.container.position().top<0&&(this.container.get(0).style.top="0px")},t}(i),s=function(o){function t(t,e,n){void 0===n&&(n="sf-link");var i=o.call(this,e,n)||this;if(1<=i.$sectionList.length){var r=i.buildTabs(n,e);i.container.append(r),i.triggerEvents()}jQuery(document.body).append(i.container);var s=jQuery(t);return 0<s.length&&(s.css("position","relative"),s.append(i.container)),i}return __extends(t,o),t.prototype.buildTabs=function(i,t){var r=this,s="";return this.list.each(function(t,e){var n=r.caption(e);s+=r.link(i,n,t,r.highlight(e)),t}),jQuery('<div class="'+i+'-tabs-panel"><ul class="sf-tabs">'+s+"</ul></div>")},t.prototype.link=function(t,e,n,i){return'<li class="'+t+'-tab" data-click="tab" data-index="'+n+'"><span class="sf-tab-text'+(i?" sf-highlight":"")+'">'+e+'<span class="sf-icon-level-down"></span></span></li>'},t.prototype.caption=function(t){var e=jQuery(t);return e.data("params")&&e.data("params").captionLink||e.text()},t.prototype.highlight=function(t){var e=jQuery(t);return!!e.data("params")&&e.data("params").highlight},t}(i);e.panelSectionFactory=function(t){new r(t)},e.linkSectionFactory=function(t,e){var n=e.position.split(",").join("-");new s(t,e).container.addClass("sf-"+n)}}),define("imageZoom/controller",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(){if(this.$container=null,this.$frame=null,t._instance)throw new Error("Error: Instantiation failed: Use CImgZoom.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.zoom=function(n,i){var r=this;this.$container&&this.destroy(),n&&this.promiseImageSizes(n).then(function(t){r.$container=r.mainContainer(),r.$frame=r.frame(i?Math.min(t.width,i):t.width);var e=r.closeButton();r.$frame.append(e),r.$frame.append(r.cloneCleanImage(n)),r.$container.append(r.$frame),jQuery("body").append(r.$container),setTimeout(function(){r.$frame&&r.$frame.css("opacity",1)},50)})},t.prototype.mainContainer=function(){return jQuery('<div class="sf-imgzoom-container"></div>')},t.prototype.frame=function(t){var e=jQuery('<div class="sf-image-frame"></div>');return e.css("max-width",t+"px"),e.css("opacity",0),e},t.prototype.closeButton=function(){var e=this,t=jQuery('<div class="sf-close-zoom" data-click="zoom-close"><span class="sf-close-zoom-btn sf-icon-cancel "></span></div>');return t.get(0).addEventListener("click",function(t){return e.close(t)},!1),t},t.prototype.cloneCleanImage=function(t){var e=t.clone();return e.removeAttr("height").removeAttr("width").removeAttr("sizes").removeClass(),e.addClass("sf-zoom-image"),e},t.prototype.promiseImageSizes=function(i){try{return new Promise(function(t,e){var n=new Image;n.src=i.attr("src"),n.onload=function(){return t({width:n.width,height:n.height})},n.onerror=function(){return e("image")}})}catch(t){throw Error("Promise")}},t.prototype.close=function(t){var e=this;this.$frame&&this.$frame.css("opacity",0),setTimeout(function(){return e.destroy()},1e3)},t.prototype.destroy=function(){var e=this;this.$frame&&this.$frame.remove(),this.$container&&(this.$container.get(0).removeEventListener("click",function(t){return e.close(t)},!1),this.$container.remove()),this.$container=null,this.$frame=null},t._instance=new t,t}();function r(t,e,n){var i,r,s,o=null;if(!e){var a=jQuery('<div class="sf-frame-image"></i></div>');o=jQuery('<span class="sf-zoom-open"><i class="sf-icon-resize-full-2"></i></span>'),a.append(o),a.insertBefore(t),t.appendTo(a)}i=t,r=n,0<(s=o||i).length&&s.get(0).addEventListener("click",function(t){return c.getInstance().zoom(i,r)},!1)}e.imageZoomFactory=function(i){jQuery(".sf-imgZoom").each(function(t,e){var n=jQuery(e);r(n,n.hasClass("sf-noicon"),i)})}}),define("listes/controller",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.setLiContainer=function(){this.$li.has("ul").addClass("sf-icon-folder-open sf-container"),jQuery("li:not(:has(ul))",this.$list).addClass("sf-icon-doc sf-contents")},t}(function(){function t(t){this.$list=jQuery(".sf-hierarchy."+t),this.$li=jQuery("li",this.$list),this.setLiContainer()}return t.prototype.setLiContainer=function(){},t}());e.listFolder=function(){new n("sf-type-folder")}}),define("responsiveTopnav/controller",["require","exports","helpers/helper"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.$menu=t,this.$menu.addClass(e?"sf-"+e:""),this.addIcon()}return t.prototype.addIcon=function(){this.$menu.append(this.getModel(this.$menu.is("ul"))),this.triggerEvents()},t.prototype.getModel=function(t){var e='<a  href="javascript:void(0)" class="sf-icon-menu" data-click="menuIcon"></a>';return t?'<li class="sf-icon-menu-container">'+e+"</li>":""+e},t.prototype.triggerEvents=function(){var e=this;this.$menu.get(0).addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;(e=n.CDom.clickHandler(e))&&this.doClick(e)},t.prototype.doClick=function(t){"menuIcon"===n.CDom.dataClick(t)&&this.clickResponsive()},t.prototype.clickResponsive=function(){this.$menu.toggleClass("sf-responsive")},t}();e.responsiveTopNavFactory=function(n){jQuery(".sf-responsive-topnav").each(function(t,e){new i(jQuery(e),n)})},e.responsiveTopNav=function(t,e){var n=jQuery(t).addClass("sf-responsive-topnav");new i(n,e)}}),define("w-siteFactory",["require","exports","calendar/controller","slideShow/controller","helpers/message","tabsection/controller","imageZoom/controller","listes/controller","responsiveTopnav/controller"],function(t,e,n,i,r,s,o,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calendarFactory=function(){n.calendarFactory()},e.calendar=function(t){return n.calendar(t)},e.slideShowFactory=function(){i.slideShowFactory()},e.slideShow=function(t){i.slideShow(t)},e.info=function(t){r.showInfo(t)},e.error=function(t,e){r.showError(t,e)},e.panelSectionFactory=function(t){s.panelSectionFactory(t)},e.linkSectionFactory=function(t,e){var n=e||{postion:"center,center"};n.position=n.position?n.position:"center,center",s.linkSectionFactory(t,n)},e.imageZoomFactory=function(t){o.imageZoomFactory(t)},e.listFolder=function(){a.listFolder()},e.responsiveTopNavFactory=function(t){c.responsiveTopNavFactory(t)},e.responsiveTopNav=function(t,e){c.responsiveTopNav(t,e)}});