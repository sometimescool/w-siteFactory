!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function l(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,e=void 0,r=void 0,a=function(t,e){d[n]=t,d[n+1]=e,2===(n+=2)&&(r?r(p):g())};var t="undefined"!=typeof window?window:void 0,s=t||{},o=s.MutationObserver||s.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(p,1)}}var d=new Array(1e3);function p(){for(var t=0;t<n;t+=2){(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0}n=0}var f,m,v,y,g=void 0;function b(t,e){var i=this,n=new this.constructor(j);void 0===n[_]&&O(n);var r=i._state;if(r){var s=arguments[r-1];a(function(){return L(r,n,s,i._result)})}else E(i,n,t,e);return n}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(j);return T(e,t),e}c?g=function(){return process.nextTick(p)}:o?(m=0,v=new o(p),y=document.createTextNode(""),v.observe(y,{characterData:!0}),g=function(){y.data=m=++m%2}):u?((f=new MessageChannel).port1.onmessage=p,g=function(){return f.port2.postMessage(0)}):g=void 0===t&&"function"==typeof require?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:h()}catch(t){return h()}}():h();var _=Math.random().toString(36).substring(2);function j(){}var C=void 0,$=1,k=2,x={error:null};function D(t){try{return t.then}catch(t){return x.error=t,x}}function S(t,e,i){var n,r,s,o;e.constructor===t.constructor&&i===b&&e.constructor.resolve===w?(s=t,(o=e)._state===$?Q(s,o._result):o._state===k?P(s,o._result):E(o,void 0,function(t){return T(s,t)},function(t){return P(s,t)})):i===x?(P(t,x.error),x.error=null):void 0===i?Q(t,e):l(i)?(n=e,r=i,a(function(e){var i=!1,t=function(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}(r,n,function(t){i||(i=!0,n!==t?T(e,t):Q(e,t))},function(t){i||(i=!0,P(e,t))},e._label);!i&&t&&(i=!0,P(e,t))},t)):Q(t,e)}function T(t,e){var i,n;t===e?P(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(i=e),null===i||"object"!==n&&"function"!==n?Q(t,e):S(t,e,D(e)))}function M(t){t._onerror&&t._onerror(t._result),I(t)}function Q(t,e){t._state===C&&(t._result=e,t._state=$,0!==t._subscribers.length&&a(I,t))}function P(t,e){t._state===C&&(t._state=k,t._result=e,a(M,t))}function E(t,e,i,n){var r=t._subscribers,s=r.length;t._onerror=null,r[s]=e,r[s+$]=i,r[s+k]=n,0===s&&t._state&&a(I,t)}function I(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,r=void 0,s=t._result,o=0;o<e.length;o+=3)n=e[o],r=e[o+i],n?L(i,n,r,s):r(s);t._subscribers.length=0}}function L(t,e,i,n){var r=l(i),s=void 0,o=void 0,a=void 0,c=void 0;if(r){if((s=function(t,e){try{return t(e)}catch(t){return x.error=t,x}}(i,n))===x?(c=!0,o=s.error,s.error=null):a=!0,e===s)return void P(e,new TypeError("A promises callback cannot return that same promise."))}else s=n,a=!0;e._state!==C||(r&&a?T(e,s):c?P(e,o):t===$?Q(e,s):t===k&&P(e,s))}var F=0;function O(t){t[_]=F++,t._state=void 0,t._result=void 0,t._subscribers=[]}var A=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(j),this.promise[_]||O(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?Q(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&Q(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===C&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===w){var r=D(e);if(r===b&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(i===z){var s=new i(j);S(s,e,r),this._willSettleAt(s,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},t.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===C&&(this._remaining--,t===k?P(n,i):this._result[e]=i),0===this._remaining&&Q(n,this._result)},t.prototype._willSettleAt=function(t,e){var i=this;E(t,void 0,function(t){return i._settledAt($,e,t)},function(t){return i._settledAt(k,e,t)})},t}();var z=function(){function e(t){this[_]=F++,this._result=this._state=void 0,this._subscribers=[],j!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){T(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var i=this.constructor;return this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){throw t})})},e}();return z.prototype.then=b,z.all=function(t){return new A(this,t).promise},z.race=function(r){var s=this;return i(r)?new s(function(t,e){for(var i=r.length,n=0;n<i;n++)s.resolve(r[n]).then(t,e)}):new s(function(t,e){return e(new TypeError("You must pass an array to race."))})},z.resolve=w,z.reject=function(t){var e=new this(j);return P(e,t),e},z._setScheduler=function(t){r=t},z._setAsap=function(t){a=t},z._asap=a,z.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=z},(z.Promise=z).polyfill(),z});var wsiteFactory=function(){var n=null,r={require:{factory:void 0,dependencies:[],exports:function(t,e){return require(t,e)},resolved:!0}};function t(t,e,i){return n=r[t]={dependencies:e,factory:i,exports:{},resolved:!1}}function i(t){if(!0!==t.resolved){t.resolved=!0;var e=t.dependencies.map(function(e){return"exports"===e?t.exports:function(){if(void 0!==r[e])return i(r[e]),r[e].exports;try{return require(e)}catch(t){throw Error("module '"+e+"' not found.")}}()});t.factory.apply(null,e)}}var s,a=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});return t("helpers/helper",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function i(){}return i.dataMouseMove=function(t){return t.getAttribute("data-mouse-move")},i.dataClick=function(t){return t.getAttribute("data-click")},i.clickHandler=function(t){for(var e=t;null!=e&&!i.dataClick(e);)e=e.parentElement;return e},i.mouseMoveHandler=function(t){for(var e=t;null!=e&&!i.dataMouseMove(e);)e=e.parentElement;return e},i}();e.CDom=i;var n=function(){function n(){}return n.repeat=function(t,e){for(var i=[];0<e;)i.push(t);return i.join("")},n.padStart=function(t,e,i){return e>>=0,i=String(void 0!==i?i:" "),t.length>e?String(t):((e-=t.length)>i.length&&(i+=n.repeat(i,e/i.length)),i.slice(0,e)+String(t))},n.split1Date=function(t){var e=t.split("-"),i={month:"",day:""};if(3!=e.length)throw new Error("Error String.split1Date format (nnnn-nn-nn): value "+t);return i.month=e[0]+"-"+e[1],i.day=e[2],i},n.splitDate=function(t){var e=t.split("-"),i={year:0,month:0,day:0};if(3!=e.length)throw new Error("Error String.splitDate format (nnnn-nn-nn): value "+t);return i.year=parseInt(e[0],10),i.month=parseInt(e[1],10)-1,i.day=parseInt(e[2],10),i},n}();e.CString=n;var r=function(){function i(){}return i.getKey=function(t){var e=n.padStart(t.getMonth()+1+"",2,"0"),i=n.padStart(t.getDate()+"",2,"0");return t.getFullYear()+"-"+e+"-"+i},i.getFrenchDay=function(t){var e=t.getDay(),i=0==e?7:e;return--i},i.getFrenchFirstDay=function(t){var e=new Date(t.getFullYear(),t.getMonth(),1,4);return i.getFrenchDay(e)},i.getFrenchWeekInMonth=function(t){return Math.floor((t.getDate()+i.getFrenchFirstDay(t)-1)/7)},i}();e.CDate=r}),t("calendar/view",["require","exports","helpers/helper"],function(t,e,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._container=t,this.monthsContainer=jQuery("<div class='sf-months-container'></div>")}return Object.defineProperty(t.prototype,"header",{get:function(){var t=[];return t.push('<div class="sf-calendar-buttons">'),t.push('<div class="sf-button-previous" data-click="previous-group"><i class="sf-icon-angle-double-left"></i></div>'),t.push('<div class="sf-button-previous-month"  data-click="previous-month"><i class="sf-icon-angle-left"></i></div>'),t.push('<div class="sf-button-next-month"  data-click="next-month"><i class="sf-icon-angle-right"></i></div>'),t.push('<div class="sf-button-next"  data-click="next-group"><i class="sf-icon-angle-double-right"></i></div>'),t.push("</div>"),jQuery(t.join(""))},enumerable:!0,configurable:!0}),t.prototype.footer=function(t){var e=jQuery("<div class='sf-calendar-footer'></div>");for(var i in e.append("<div class='sf-calendar-legend'><div class='sf-rented sf-icon-legend'></div>Non disponible</div>"),e.append("<div class='sf-calendar-legend'><div class='sf-notinit sf-icon-legend'></div>Fermé</div>"),t){var n="sf-"+i;e.append('<div class="sf-calendar-legend"><div class="'+n+' sf-icon-legend"></div>'+t[i]+"</div>")}return e},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),t.prototype.draw=function(t,e){this.container.append(this.header),this.container.append(this.monthsContainer),this.container.append(this.footer(e)),this.monthContentDraw(t)},t.prototype.monthContentDraw=function(t){for(var e in this.monthsContainer.empty(),t){var i=parseInt(e.split("-")[0],10),n=parseInt(e.split("-")[1],10);this.monthsContainer.append(this.buildMonth(i,n,t[e]))}},t.prototype.buildMonth=function(t,e,i){var n=this.monthLabel(t,e),r=jQuery('<div class="sf-layout-month">');r.append('<div class="sf-header-month">'+n+"</div>");var s=jQuery('<table class="sf-month-content" cellspacing="0"></div>');s.append("<tr><th>Lun</th><th>Mar</th><th>Mer</th><th>Jeu</th><th>Ven</th><th>Sam</th><th>Dim</th></tr>"),r.append(s);for(var o,a=-1,c=[],l=[],u=i.length,h=0;h<u;h++){var d=new Date(t,e-1,parseInt(i[h].day,10),4);a!=p.CDate.getFrenchWeekInMonth(d)&&(o="",c=this.initWeek(),l.push(c),a=p.CDate.getFrenchWeekInMonth(d)),o=parseInt(i[h].day,10)+"",c[p.CDate.getFrenchDay(d)+1]=this.htmlDay(o,i[h].data)}for(;l.length<6;)l.push(this.initWeek());return s.append(jQuery(l.join(""))),r},t.prototype.initWeek=function(){return["<tr>",this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),this.htmlDay("",{}),"</tr>"]},t.prototype.htmlDay=function(t,e){var i="",n=e.rent&&!e.start||e.rent&&e.start&&e.end,r=e.rent&&!e.end||e.rent&&e.start&&e.end,s="sf-calendar-day-morning "+(n?"sf-rented":e.typeMorning),o="sf-calendar-day-afternoon "+(r?"sf-rented":e.typeAfternoon);return i='<td class="sf-calendar-day'+(n&&r||" sf-notinit"==e.typeMorning&&" sf-notinit"==e.typeAfternoon?" sf-notfree":"")+'">',i+=t,i+='<div class="'+s+'"></div>',i+='<div class="'+o+'"></div>',i+="</td>"},t.prototype.monthLabel=function(t,e){return["Janvier","F&eacute;vrier","Mars","Avril","Mai","Juin","Juillet","Ao&ucirc;t","Septembre","Octobre","Novembre","D&eacute;cembre"][e-1]+" "+t},t}();e.CrView=i}),t("calendar/model",["require","exports","helpers/helper","helpers/helper"],function(t,e,l,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.dataid=t,this._dataRoot=e,this._periods=null,this._availabilities=null,this._data=null,this._lastKey=""}return Object.defineProperty(t.prototype,"lastKey",{get:function(){return this._lastKey},enumerable:!0,configurable:!0}),t.prototype.getPeriods=function(i){var n=this;try{return new Promise(function(e,t){n._periods?e():jQuery.getJSON(i,function(t){n._periods=t[n.dataid]||t,e()}).fail(function(){return t("Periods")})})}catch(t){throw Error("Promise")}},t.prototype.getAvailabilities=function(i){var n=this;try{return new Promise(function(e,t){n._availabilities?e():jQuery.getJSON(i,function(t){n._availabilities=t[n.dataid]||t,e()}).fail(function(){return t("Availabilities")})})}catch(t){throw Error("Promise")}},t.prototype.getLegend=function(i){var n=this;try{return new Promise(function(e,t){jQuery.getJSON(i,function(t){e(t[n.dataid]||t)}).fail(function(){return t("Legend")})})}catch(t){throw Error("Promise")}},t.prototype.data=function(t,e){return this._data||(this._data={},this.buildPeriods(),this.buildAvailabilities()),this.dataReduce(t,e)},t.prototype.dataReduce=function(t,e){var i,n={},r=new Date(t.year,t.month,1,5),s=new Date(t.year,t.month+e,0,5),o=h.CDate.getKey(r),a=h.CDate.getKey(s);for(var c in this._data)o<=c&&c<=a&&(n[(i=l.CString.split1Date(c)).month]=n[i.month]||[],n[i.month].push({day:i.day,data:this._data[c]}));return n},Object.defineProperty(t.prototype,"datas",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.buildPeriods=function(){var l=this,u="",t=function(c){l._periods[c].forEach(function(t){for(var e=new Date(parseInt(c,10),parseInt(t.start.split("-")[0],10)-1,parseInt(t.start.split("-")[1],10)),i=new Date(parseInt(c,10),parseInt(t.start.split("-")[0],10)-1,parseInt(t.start.split("-")[1],10)),n=new Date(parseInt(c,10),parseInt(t.end.split("-")[0],10)-1,parseInt(t.end.split("-")[1],10)),r=h.CDate.getKey(new Date);e.getTime()<=n.getTime();){var s=h.CDate.getKey(e);u<s&&(u=s),l._data[s]=l._data[s]||{};var o=e.getTime()==i.getTime(),a=e.getTime()==n.getTime();r<s?(l._data[s].typeMorning=(l._data[s].typeMorning?l._data[s].typeMorning:"")+(!o||o&&a?" sf-"+t.type:""),l._data[s].typeAfternoon=(l._data[s].typeAfternoon?l._data[s].typeAfternoon:"")+(!a||o&&a?" sf-"+t.type:"")):(l._data[s].overDate=!0,l._data[s].rent=!0),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}})};for(var e in l._periods)t(e);l._lastKey=u},t.prototype.buildAvailabilities=function(){var o=this,t=function(s){o._availabilities[s].forEach(function(t){for(var e=new Date(parseInt(s,10),parseInt(t.start.split("-")[0],10)-1,parseInt(t.start.split("-")[1],10)),i=new Date(parseInt(s,10),parseInt(t.end.split("-")[0],10)-1,parseInt(t.end.split("-")[1],10)),n=e;e.getTime()<=i.getTime();){var r=h.CDate.getKey(e);o._data[r]=o._data[r]||{},o._data[r].rent=!0,o._data[r].overDate||(n.getTime()==e.getTime()&&(o._data[r].start=!0),i.getTime()==e.getTime()&&(o._data[r].end=!0)),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}})};for(var e in o._availabilities)t(e)},t}();e.CrModel=i}),t("calendar/messages",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.messagesfr={Header:"Le calendrier ne peut pas être affiché.",Promise:["Votre navigateur ne prend pas en charge certaines fonctionnalités indispensables.","Merci d'utiliser un navigateur plus récent."],Availabilities:["Disponibilités non trouvées","Vérifiez les paramètres du composant (data-params)"],Periods:["Periodes non trouvées.","Vérifiez les paramètres du composant (data-params)"],Legend:["Légende non trouvée.","Vérifiez les paramètres du composant (data-params)"]}}),t("helpers/message",["require","exports","helpers/helper"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.$frame=jQuery('<div class="sf-message-box"></div>')}return t.prototype.messsageBoxList=function(){return jQuery(".sf-message-box")},t.prototype.error=function(t,e){this.$frame.addClass("sf-error"),this.show(this.message(t,e))},t.prototype.info=function(t,e){this.$frame.addClass("sf-info"),this.show(this.message(t,e?new Error(e):void 0))},t.prototype.message=function(t,e){var i,n,r,s,o;return s=null!=(r=t)&&void 0!==r.header&&null!==r.header&&"string"==typeof r.header,o=void 0!==r.message&&null!==r.message&&r.message instanceof Array,s&&o?n=t:(i=t[(e=e||new Error("unknonwn")).message]||new Array(e.message),n={header:t.Header,message:i}),n},t.prototype.show=function(t){var e=this.messsageBoxList().length;this.$frame.css("z-index",1e3+e);this.header(t.header);var i=jQuery('<div class="sf-message-content"></div>'),n="";t.message.forEach(function(t){n+='<div class="sf-message-line">'+t+"</div>"}),i.append(jQuery(n)),this.$frame.append(this.header(t.header)),this.$frame.append(i);var r=jQuery("body");r.append(this.$frame);var s=this.$frame.width()||0,o=((r.width()||s)-s)/2;this.$frame.css("left",o+20*e+"px"),this.$frame.css("top",20+40*e+"px"),this.triggerEvent()},t.prototype.triggerEvent=function(){var e=this,t=this.$frame.get(0);t&&t.addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;if(e=i.CDom.clickHandler(e))switch(i.CDom.dataClick(e)){case"message-close":this.destroy()}},t.prototype.header=function(t){var e='<div class="sf-message-header"><div class="sf-message-title">'+t+"</div>";return e+='<div class="sf-close-popup" data-click="message-close"><i class="sf-icon-cancel"></i></div>',e+="</div>",jQuery(e)},t.prototype.destroy=function(){var e=this,t=document.getElementById("sf-message");t&&t.removeEventListener("click",function(t){return e.click(t)},!1),this.$frame.remove()},t}();e.CMessage=n,e.showError=function(t,e){(new n).error(t,e)},e.showInfo=function(t){(new n).info(t)}}),t("calendar/controller",["require","exports","calendar/view","calendar/model","calendar/messages","helpers/message","helpers/helper","helpers/helper","helpers/helper"],function(t,e,i,n,r,s,o,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){this.params=e,this.monthCount=e.monthCount,this.start={year:(new Date).getFullYear(),month:(new Date).getMonth()},this.model=new n.CrModel(e.dataid,e.dataRoot),this.view=new i.CrView(t),t.removeAttr("data-params")}return t.prototype.previousGroup=function(){var t=new Date(this.start.year,this.start.month-this.monthCount,1,5);this.start=this.computePreviousStart(t),this.refresh()},t.prototype.previousMonth=function(){var t=new Date(this.start.year,this.start.month-1,1,5);this.start=this.computePreviousStart(t),this.refresh()},t.prototype.computePreviousStart=function(t){var e=new Date,i=t.getTime()<e.getTime()?e:t,n={year:0,month:0};return n.year=i.getFullYear(),n.month=i.getMonth(),n},t.prototype.nextGroup=function(){var t=new Date(this.start.year,this.start.month+this.monthCount,1,4);this.start=this.computeNextStart(t),this.refresh()},t.prototype.nextMonth=function(){var t=new Date(this.start.year,this.start.month+1,1,4);this.start=this.computeNextStart(t),this.refresh()},t.prototype.computeNextStart=function(t){var e={year:0,month:0},i=this.model.lastKey,n=o.CString.splitDate(i),r=new Date(n.year,n.month+1-this.monthCount,1,4),s=t.getTime()<r.getTime()?t:r;return e.year=s.getFullYear(),e.month=s.getMonth(),e},t.prototype.triggerEvents=function(){var e=this,t=this.view.container.get(0);t&&t.addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;if(e=a.CDom.clickHandler(e))switch(a.CDom.dataClick(e)){case"previous-group":this.previousGroup();break;case"previous-month":this.previousMonth();break;case"next-month":this.nextMonth();break;case"next-group":this.nextGroup()}},t.prototype.dataLocation=function(t){return""+this.params.dataRoot+t+"?"+(new Date).getTime()},t.prototype.show=function(){var e,t=this,i=this;try{i.model.getPeriods(this.dataLocation(this.params.periods)).then(function(){return i.model.getAvailabilities(t.dataLocation(t.params.availabilities))}).then(function(){return e=i.model.data(i.start,i.monthCount),i.model.getLegend(t.dataLocation(t.params.legend))}).then(function(t){i.view.draw(e,t),i.triggerEvents()}).catch(function(t){(new s.CMessage).error(r.messagesfr,Error(t))})}catch(t){(new s.CMessage).error(r.messagesfr,t)}},t.prototype.dayArrivalSelectable=function(t){var e=this.getDateConfigDay(t),i=!e.overDate&&(!e.rent||!e.start&&e.end);return[i,i?e.typeAfternoon:"",""]},t.prototype.dayDepartureSelectable=function(t){var e=this.getDateConfigDay(t),i=!e.overDate&&(!e.rent||!e.end&&e.start);return[i,i?e.typeMorning:"",""]},t.prototype.getDateConfigDay=function(t){return this.model.datas[c.CDate.getKey(t)]},t.prototype.refresh=function(){var t=this.model.dataReduce(this.start,this.monthCount);this.view.monthContentDraw(t)},t}();e.CrCalendar=l,e.calendarFactory=function(){jQuery(".sf-calendar").each(function(t,e){var i=jQuery(e),n=i.data("params");new l(i,n).show()})},e.calendar=function(t){var e=jQuery("#"+t);if(0==e.length)return null;var i=e.data("params"),n=new l(e,i);return n.show(),n}}),t("slideShow/model",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._data=[],this._imageRoot=t}return t.prototype.requestdata=function(i,n,r){var s=this;try{return new Promise(function(t,e){s.updateData(t,e,i,n,r)})}catch(t){throw Error("Promise")}},t.prototype.updateData=function(e,t,i,n,r){var s=this;n?jQuery.getJSON(n+"?"+(new Date).getTime(),function(t){s._data=i?s.setImagesUrl(t[i]):s.setImagesUrl(t),e(s.data)}).fail(function(){return t("slideShow")}):r?s._data=i?s.setImagesUrl(r[i]):s.setImagesUrl(r):t("slideShow")},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.data.length},enumerable:!0,configurable:!0}),t.prototype.setImagesUrl=function(t){var e=this;return t.map(function(t){return t.url=e._imageRoot+t.name,t})},t}();e.CSModel=i}),t("slideShow/view",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._$container=t,this._$slide=jQuery(""),this._$thumbnails=jQuery(""),this._$thumbnailContainer=jQuery(""),this._$thumbnailsRow=jQuery(""),this._params={showCaption:!0,showThumbnail:!0,current:0}}return t.prototype.draw=function(t,e){if(this._$slide.empty(),this._$thumbnails.empty(),this._params=t,this._$slide=this.buildSlide(e[this._params.current],this._params.current,e.length,this._params.showCaption),this._$container.append(this._$slide),this._params.showThumbnail){this._$thumbnails=this.buildThumbnails(this._params.current,e),this._$container.append(this._$thumbnails);var i=jQuery(".sf-slide-thumbnail-column",this._$thumbnailsRow).width()||0;this._$thumbnailsRow.width(i*e.length+2*e.length)}},Object.defineProperty(t.prototype,"container",{get:function(){return this._$container},enumerable:!0,configurable:!0}),t.prototype.getThumbnailPosition=function(t){return jQuery('.sf-slide-thumbnail-column[data-index="'+t+'"]',this._$thumbnails).position().left},t.prototype.getThumbnailWidth=function(t){return jQuery('.sf-slide-thumbnail-column[data-index="'+t+'"]',this._$thumbnails).width()||0},t.prototype.isThumbnailVisible=function(t){var e=!0,i=this.getThumbnailPosition(t),n=this.getThumbnailWidth(t);return(i<Math.abs(this.rowLeft)||i+n>Math.abs(this.rowLeft)+this.containerWidth)&&(e=!1),e},t.prototype.showThumbNail=function(t){if(this._params.showThumbnail&&!this.isThumbnailVisible(t)){var e=Math.max(this.centerThumbnail(t),0);return e=Math.min(e,this.rowWidth-this.containerWidth),this.rowLeft=-e,-e}return this.rowLeft},t.prototype.centerThumbnail=function(t){var e=this.getThumbnailPosition(t);return e=e+this.getThumbnailWidth(t)/2-this.containerWidth/2},t.prototype.moveThumbNails=function(t){if(!this._params.showThumbnail)return 0;var e=this.containerWidth,i=this.rowLeft,n=0;return t?(Math.abs(i)+e+this.containerWidth>this.rowWidth&&(e=this.rowWidth+i-this.containerWidth),n=i-e):(0<=i+e&&(e=i=0),n=i+e),this.rowLeft=n},t.prototype.refresh=function(t,e,i){var n=this._params.showCaption,r=this._params.showThumbnail,s=jQuery("img.sf-img-slide-0",this._$slide),o=jQuery("img.sf-img-slide-1",this._$slide),a=s,c=o;"0"==s.css("opacity")&&(a=o,c=s),c.attr("src",t.url),c.css("opacity",1),a.css("opacity",0),jQuery(".sf-numbertext",this._$slide).html(this.formatNumberText(i,e)),n&&jQuery(".sf-slide-caption",this._$slide).html(t.caption),r&&(jQuery(".sf-slide-thumbnail-column",this._$thumbnails).removeClass("sf-current"),jQuery('.sf-slide-thumbnail-column[data-index="'+i+'"]',this._$thumbnails).addClass("sf-current"))},t.prototype.buildSlide=function(t,e,i,n){var r='<div class="sf-slide">'+this.slideContent(t,e,i,n)+"</div>";return jQuery(r)},t.prototype.formatNumberText=function(t,e){return t+1+"/"+e},t.prototype.slideContent=function(t,e,i,n){var r='<div class="sf-img-container-slide"><img class="sf-img-slide-0" src="'+t.url+'">';return r+='<img style="opacity:0" class="sf-img-slide-1" src="'+t.url+'"></div>',r+='<div class="sf-numbertext">'+this.formatNumberText(e,i)+"</div>",r+='<div class="sf-slide-btn-left" data-click="slide-left" style="visibility:hidden"></div>',r+='<div class="sf-slide-btn-right" data-click="slide-right" style="visibility:hidden"></div>',n&&(r+='<div class="sf-slide-caption">'+t.caption+"</div>"),r},t.prototype.buildThumbnails=function(i,t){var n=this,e=jQuery('<div class="sf-thumbnail"></div>');return e.append(this.thumbnailButtons()),this._$thumbnailContainer=jQuery('<div class="sf-thumbnail-container"></div>'),this._$thumbnailsRow=jQuery('<div class="sf-slide-thunbnail-row"></div>'),t.forEach(function(t,e){n._$thumbnailsRow.append(n.buildThumbnail(t,e,i))}),this._$thumbnailContainer.append(n._$thumbnailsRow),e.append(this._$thumbnailContainer),e},Object.defineProperty(t.prototype,"rowWidth",{get:function(){return this._params.showThumbnail&&this._$thumbnailsRow.width()||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowLeft",{get:function(){if(!this._params.showThumbnail)return 0;var t=parseFloat(this._$thumbnailsRow.css("left"));return t<0&&(t-=.01),t},set:function(t){this._params.showThumbnail&&this._$thumbnailsRow.css("left",t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"containerWidth",{get:function(){return this._params.showThumbnail&&this._$thumbnailContainer.width()||0},enumerable:!0,configurable:!0}),t.prototype.buildThumbnail=function(t,e,i){var n='<div class="sf-slide-thumbnail-column '+(i==e?"current":"")+'"';return n+=' data-click="thumbnail" data-index='+e+' title="'+t.caption+'" alt="'+t.caption+'"',n+=' style="background-image:url('+t.url+')">',jQuery(n)},t.prototype.thumbnailButtons=function(){return'<div class="sf-thumbnail-btn-left" data-click="thumbnails-left" style="visibility:hidden"><i class="sf-icon-angle-left"></i></div>','<div class="sf-thumbnail-btn-right" data-click="thumbnails-right" style="visibility:hidden"><i class="sf-icon-angle-right"></i></div>',"</div>",jQuery('<div class="sf-thumbnail-btns"><div class="sf-thumbnail-btn-left" data-click="thumbnails-left" style="visibility:hidden"><i class="sf-icon-angle-left"></i></div><div class="sf-thumbnail-btn-right" data-click="thumbnails-right" style="visibility:hidden"><i class="sf-icon-angle-right"></i></div></div>')},t.prototype.thumbnailBtnsVisibility=function(t,e){this._params.showThumbnail&&(jQuery(".sf-thumbnail-btn-left",this._$thumbnails).css("visibility",t),jQuery(".sf-thumbnail-btn-right",this._$thumbnails).css("visibility",e))},t.prototype.slideBtnsVisibility=function(t,e){jQuery(".sf-slide-btn-left",this._$slide).css("visibility",t),jQuery(".sf-slide-btn-right",this._$slide).css("visibility",e)},t}();e.CSlideView=i}),t("slideShow/messages",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.messagesfr={Header:"Le slider ne peut pas être affiché.",Promise:["Votre navigateur ne prend pas en charge certaines fonctionnalités indispensables.","Merci d'utiliser un navigateur plus récent."],slideShow:["Impossible de trouver la liste des images à afficher.","Vérifiez les paramètres du composant (data-params)"]}}),t("slideShow/controller",["require","exports","slideShow/view","slideShow/model","slideShow/messages","helpers/message","helpers/helper"],function(t,e,i,n,r,s,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){this._currentIndex=0,this._id=t.attr("id")||"",this._params=e,this._view=new i.CSlideView(t),this._model=new n.CSModel(this._params.imageRoot),t.removeAttr("data-params")}return t.prototype.triggerEvents=function(){var e=this,t=this._view.container.get(0);t&&t.addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;if(e=o.CDom.clickHandler(e))switch(o.CDom.dataClick(e)){case"slide-left":this.clickSlideBtns(-1);break;case"slide-right":this.clickSlideBtns(1);break;case"thumbnails-right":this.clickThumbernailBtns(!0);break;case"thumbnails-left":this.clickThumbernailBtns(!1);break;case"thumbnail":this.clickThumbnail(parseInt(e.getAttribute("data-index")||"0",10))}},t.prototype.clickSlideBtns=function(t){var e=this._currentIndex;e+=t,this.changeSlide(e);var i=this._view.showThumbNail(e);this.btnsState(i)},t.prototype.clickThumbnail=function(t){this.changeSlide(t),this.btnsState(this._view.rowLeft)},t.prototype.clickThumbernailBtns=function(t){var e;e=this._view.moveThumbNails(t),this.btnsState(e)},t.prototype.btnsState=function(t){var e=0<=t?"hidden":"visible",i=-t+this._view.containerWidth>=this._view.rowWidth?"hidden":"visible";this._view.thumbnailBtnsVisibility(e,i),e=0==this._currentIndex?"hidden":"visible",i=this._currentIndex==this._model.length-1?"hidden":"visible",this._view.slideBtnsVisibility(e,i)},t.prototype.changeSlide=function(t){this._currentIndex=Math.max(t,0)&&Math.min(t,this._model.length-1),this._view.refresh(this._model.data[this._currentIndex],this._model.length,this._currentIndex)},t.prototype.show=function(){var i=this;try{i._model.requestdata(i._params.dataid,i._params.dataLocation).then(function(t){var e={current:0,showThumbnail:i._params.showThumbnail,showCaption:i._params.showCaption};i._view.draw(e,t),i.triggerEvents(),i.btnsState(0)}).catch(function(t){(new s.CMessage).error(r.messagesfr,Error(t))})}catch(t){(new s.CMessage).error(r.messagesfr,t)}},t}();e.CSlideShow=a,e.slideShowFactory=function(){jQuery(".sf-slideShow").each(function(t,e){var i=jQuery(e),n=i.data("params");new a(i,n).show()})},e.slideShow=function(t){var e=jQuery("#"+t);if(0<e.length){var i=e.data("params");new a(e,i).show()}}}),t("tabsection/controller",["require","exports","helpers/helper"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.$sectionList=jQuery("."+e),this.$container=jQuery('<div class="'+e+'-tabs"></div>')}return Object.defineProperty(t.prototype,"list",{get:function(){return this.$sectionList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.$container},enumerable:!0,configurable:!0}),t.prototype.triggerEvents=function(){var e=this;this.container.get(0).addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;(e=i.CDom.clickHandler(e))&&this.doClick(e)},t.prototype.doClick=function(t){"tab"===i.CDom.dataClick(t)&&this.clickTab(jQuery(t).data("index"))},t.prototype.clickTab=function(t){var e=parseInt(t,10)||0,i=jQuery(this.list[e]),n=parseInt(i.css("margin-top"),10)+parseInt(i.css("padding-top"),10),r=i.offset(),s=(this.container&&this.container.height()||0)+6;this.scrollTo(r.top-s+n-2)},t.prototype.scrollTo=function(t){jQuery("body, html").animate({scrollTop:t},700)},t}(),r=function(o){function t(t,e){void 0===e&&(e="sf-panel");var i=o.call(this,t,e)||this;if(i.panelClosed=!1,i.buttonSize=30,i.linkSizeMin=90,i.top=0,1<=i.$sectionList.length){jQuery(document.body).append(i.container);var n=i.getParams(t);i.linkSizeMin=n.minSize;var r=i.buildTabs(e,n);i.container.append(r),i.top=(i.container&&i.container.height()||0)+6;var s=i.paddingRight(r,n.scrollTop,n.close);r.css("padding-right",s+"px"),i.triggerEvents()}return i.scroll(),i}return a(t,o),t.prototype.buildTabs=function(n,t){var r=this,s="",o=this.widths(),e="";return this.buttonSize&&(e='style="width:'+this.buttonSize+'px" '),this.list.each(function(t,e){var i=r.caption(e);s+=r.link(n,i,t,o),t}),t.scrollTop&&(0,s+='<li class="'+n+'-tab sf-btn-panel" '+e+' data-click="scrollTop"><span style="width:'+this.buttonSize+'px" class="sf-tab-scrollTop sf-icon-up-circled"></span></li>'),t.close&&(0,s+='<li class="'+n+'-tab sf-btn-panel" '+e+' data-click="close"><span style="width:'+this.buttonSize+'px" class="sf-tab-close sf-icon-cancel-circled"></span></li>'),jQuery('<div class="'+n+'-tabs-panel"><ul class="sf-tabs">'+s+"</ul></div>")},t.prototype.link=function(t,e,i,n){return'<li class="'+t+'-tab" '+('style="width:'+100*n.width[i]/n.total+'%"')+' data-click="tab" data-index="'+i+'"><span '+('style="width:'+n.width[i]+'px"')+' class="sf-tab-text">'+e+"</span></li>"},t.prototype.getParams=function(t){var e={scrollTop:!1,close:!1,minSize:this.linkSizeMin,css:""};return t&&(e.scrollTop=!!t&&t.scrollTop,e.close=!!t&&t.close,e.minSize=t.minSize?t.minSize:this.linkSizeMin),e},t.prototype.triggerEvents=function(){var e=this;o.prototype.triggerEvents.call(this),window.addEventListener("scroll",function(t){return e.scroll()},!1)},t.prototype.doClick=function(t){switch(o.prototype.doClick.call(this,t),i.CDom.dataClick(t)){case"close":this.panelClosed=!0,this.hide();break;case"scrollTop":this.scrollTo(0)}},t.prototype.caption=function(t){var e=jQuery(t);return e.data("params")&&e.data("params").caption||e.text()},t.prototype.scroll=function(){20<document.body.scrollTop||20<document.documentElement.scrollTop?this.panelClosed||this.show():(this.panelClosed=!1,this.hide())},t.prototype.widths=function(){var r=this,s={width:[],total:0};return this.list.each(function(t,e){var i=jQuery(e),n=i.data("params")&&i.data("params").caption||i.text();s.width.push(r.captionSize(n)),s.total+=s.width[t]}),s},t.prototype.paddingRight=function(t,e,i){var n=parseInt(t.css("padding-left"),10)+this.$sectionList.length-1;return e&&(n+=this.buttonSize+1),i&&(n+=this.buttonSize+1),n},t.prototype.captionSize=function(t){var e=jQuery('<span id="sf-sizing"style="width:auto;box-sizing: border-box;" class="sf-tab-text">'+t+"</span>");jQuery(document.body).append(e);var i=Math.max((e.width()||0)+2,this.linkSizeMin);return e.remove(),i},t.prototype.hide=function(){0<=this.container.position().top&&(this.container.get(0).style.top="-"+this.top+"px")},t.prototype.show=function(){this.container.position().top<0&&(this.container.get(0).style.top="0px")},t}(n),s=function(o){function t(t,e,i){void 0===i&&(i="sf-link");var n=o.call(this,e,i)||this;if(1<=n.$sectionList.length){var r=n.buildTabs(i,e);n.container.append(r),n.triggerEvents()}jQuery(document.body).append(n.container);var s=jQuery(t);return 0<s.length&&(s.css("position","relative"),s.append(n.container)),n}return a(t,o),t.prototype.buildTabs=function(n,t){var r=this,s="";return this.list.each(function(t,e){var i=r.caption(e);s+=r.link(n,i,t,r.highlight(e)),t}),jQuery('<div class="'+n+'-tabs-panel"><ul class="sf-tabs">'+s+"</ul></div>")},t.prototype.link=function(t,e,i,n){return'<li class="'+t+'-tab" data-click="tab" data-index="'+i+'"><span class="sf-tab-text'+(n?" sf-highlight":"")+'">'+e+'<span class="sf-icon-level-down"></span></span></li>'},t.prototype.caption=function(t){var e=jQuery(t);return e.data("params")&&e.data("params").captionLink||e.text()},t.prototype.highlight=function(t){var e=jQuery(t);return!!e.data("params")&&e.data("params").highlight},t}(n);e.panelSectionFactory=function(t){new r(t)},e.linkSectionFactory=function(t,e){var i=e.position.split(",").join("-");new s(t,e).container.addClass("sf-"+i)}}),t("imageZoom/controller",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(){if(this.$container=null,this.$frame=null,this.$btnClose=null,t._instance)throw new Error("Error: Instantiation failed: Use CImgZoom.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.zoom=function(e,i){var n=this,r=this;this.$container&&this.destroy(),e&&this.promiseImageSizes(e).then(function(t){r.$container=r.mainContainer(),r.$frame=r.frame(i?Math.min(t.width,i):t.width),n.$btnClose=r.closeButton(),r.$frame.append(n.$btnClose),r.$frame.append(r.cloneCleanImage(e)),r.$container.append(r.$frame),jQuery("body").append(r.$container),setTimeout(function(){r.$frame&&r.$frame.css("opacity",1)},50)})},t.prototype.mainContainer=function(){return jQuery('<div class="sf-imgzoom-container"></div>')},t.prototype.frame=function(t){var e=jQuery('<div class="sf-image-frame"></div>');return e.css("max-width",t+"px"),e.css("opacity",0),e},t.prototype.closeButton=function(){var e=this,t=jQuery('<div class="sf-close-zoom" data-click="zoom-close"><span class="sf-close-zoom-btn sf-icon-cancel "></span></div>');return t.get(0).addEventListener("click",function(t){return e.close(t)},!1),t},t.prototype.cloneCleanImage=function(t){var e=t.clone();return e.removeAttr("height").removeAttr("width").removeAttr("sizes").removeClass(),e.addClass("sf-zoom-image"),e},t.prototype.promiseImageSizes=function(n){try{return new Promise(function(t,e){var i=new Image;i.src=n.attr("src"),i.onload=function(){return t({width:i.width,height:i.height})},i.onerror=function(){return e("image")}})}catch(t){throw Error("Promise")}},t.prototype.close=function(t){var e=this;this.$frame&&this.$frame.css("opacity",0),setTimeout(function(){return e.destroy()},1e3)},t.prototype.destroy=function(){var e=this;this.$frame&&this.$frame.remove(),this.$container&&(this.$btnClose.get(0).removeEventListener("click",function(t){return e.close(t)},!1),this.$container.remove()),this.$container=null,this.$frame=null},t._instance=new t,t}();function r(t,e,i){var n,r,s,o=null;if(!e){var a=jQuery('<div class="sf-frame-image"></i></div>');o=jQuery('<span class="sf-zoom-open"><i class="sf-icon-resize-full-2"></i></span>'),a.append(o),a.insertBefore(t),t.appendTo(a)}n=t,r=i,0<(s=o||n).length&&s.get(0).addEventListener("click",function(t){return c.getInstance().zoom(n,r)},!1)}e.imageZoomFactory=function(n){jQuery(".sf-imgZoom").each(function(t,e){var i=jQuery(e);r(i,i.hasClass("sf-noicon"),n)})}}),t("listes/controller",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.setLiContainer=function(){this.$li.has("ul").addClass("sf-icon-folder-open sf-container"),jQuery("li:not(:has(ul))",this.$list).addClass("sf-icon-doc sf-contents")},t}(function(){function t(t){this.$list=jQuery(".sf-hierarchy."+t),this.$li=jQuery("li",this.$list),this.setLiContainer()}return t.prototype.setLiContainer=function(){},t}());e.listFolder=function(){new i("sf-type-folder")}}),t("responsiveTopnav/controller",["require","exports","helpers/helper"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.$menu=t,this.$menu.addClass(e?"sf-"+e:""),this.addIcon()}return t.prototype.addIcon=function(){this.$menu.append(this.getModel(this.$menu.is("ul"))),this.triggerEvents()},t.prototype.getModel=function(t){var e='<a  href="javascript:void(0)" class="sf-icon-menu" data-click="menuIcon"></a>';return t?'<li class="sf-icon-menu-container">'+e+"</li>":""+e},t.prototype.triggerEvents=function(){var e=this;this.$menu.get(0).addEventListener("click",function(t){return e.click(t)},!1)},t.prototype.click=function(t){var e=t.target;(e=i.CDom.clickHandler(e))&&this.doClick(e)},t.prototype.doClick=function(t){"menuIcon"===i.CDom.dataClick(t)&&this.clickResponsive()},t.prototype.clickResponsive=function(){this.$menu.toggleClass("sf-responsive")},t}();e.responsiveTopNavFactory=function(i){jQuery(".sf-responsive-topnav").each(function(t,e){new n(jQuery(e),i)})},e.responsiveTopNav=function(t,e){var i=jQuery(t).addClass("sf-responsive-topnav");new n(i,e)}}),t("imageDetail/view",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.draw=function(t,e){var i=screen.height;this.$detail=jQuery('<div class="sf-img-detail-result" style="background-image:url(\''+t+"')\"></div>"),this.$image=jQuery('<div class="sf-img-detail-image" data-mouse-move="move-image"></div>'),this.$square=jQuery('<div class="sf-img-detail-square" data-mouse-move="move-square"></div>'),this.$image.append(this.$square),this.$image.append('<img style="max-height:'+i+'px" src="'+t+'">'),this.$btnclose=jQuery('<div class="sf-close-img-detail" data-click="img-detail-close"><span class="sf-close-img-detail-btn sf-icon-cancel "></span></div>');var n=jQuery('<div class="sf-img-detail-frame" style="max-width:'+e+'px"></div>');this.$container=jQuery('<div class="sf-img-detail-container"></div>'),n.append(this.$btnclose),n.append(this.$image),n.append(this.$detail),this.$container.append(n),jQuery("body").append(this.$container)},t.prototype.squareOffset=function(){var t={width:0,height:0};return t.width=this.$square.get(0).offsetWidth,t.height=this.$square.get(0).offsetHeight,t},t.prototype.squarePosition=function(t){var e=t||{left:0,top:0};return t?(this.$square.get(0).style.left=t.left+"px",this.$square.get(0).style.top=t.top+"px"):e=this.$square.position(),e},t.prototype.imageSizes=function(){var t={width:0,height:0};return t.width=this.$image.width(),t.height=this.$image.height(),t},t.prototype.resultBackGroundPosition=function(t,e){this.$detail.get(0).style.backgroundPosition="-"+t+"px -"+e+"px"},t.prototype.destroy=function(){this.$container&&(this.$container.empty(),this.$container.remove())},t}();e.CImageDetailView=i}),t("imageDetail/controller",["require","exports","helpers/helper","imageDetail/view"],function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(){if(this.ratio={cx:0,cy:0},t._instance)throw new Error("Error: Instantiation failed: Use CImageDetail.getInstance() instead of new.");this.view=new n.CImageDetailView,t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.zoom=function(t,e){this.destroy(),this.view.draw(t,e),this.setRation(),this.triggerEvents()},t.prototype.setRation=function(){this.ratio.cx=this.view.$detail.get(0).offsetWidth/this.view.$square.get(0).offsetWidth,this.ratio.cy=this.view.$detail.get(0).offsetHeight/this.view.$square.get(0).offsetHeight,this.view.$detail.get(0).style.backgroundSize=this.view.$image.width()*this.ratio.cx+"px "+this.view.$image.height()*this.ratio.cy+"px"},t.prototype.triggerEvents=function(){var e=this;this.view.$container.get(0).addEventListener("click",function(t){return e.handleClick(t)},!1),this.view.$container.get(0).addEventListener("mousemove",function(t){return e.handleMouseMove(t)},!1),this.view.$container.get(0).addEventListener("touchmove",function(t){return e.handleMouseMove(t)},!1)},t.prototype.handleMouseMove=function(t){var e=t.target;if(e=i.CDom.mouseMoveHandler(e))switch(i.CDom.dataMouseMove(e)){case"move-square":case"move-image":this.moveSquare(t)}},t.prototype.handleClick=function(t){var e=t.target;if(e=i.CDom.clickHandler(e))switch(i.CDom.dataClick(e)){case"img-detail-close":this.close()}},t.prototype.close=function(){this.destroy()},t.prototype.destroy=function(){var e=this;this.view.$btnclose&&this.view.$btnclose.get(0).removeEventListener("click",function(t){return e.close()},!1),this.view.destroy()},t.prototype.moveSquare=function(t){var e,i,n,r,s;t.preventDefault(),e=this.getCursorPos(t),i=this.view.squareOffset(),n=this.view.imageSizes(),r=e.x-i.width/2,s=e.y-i.height/2,r>n.width-i.width&&(r=n.width-i.width),r<0&&(r=0),s>n.height-i.height&&(s=n.height-i.height),s<0&&(s=0),this.view.squarePosition({left:r,top:s}),this.view.resultBackGroundPosition(r*this.ratio.cx,s*this.ratio.cy)},t.prototype.getCursorPos=function(t){var e,i,n,r={x:0,y:0},s=t||window.event;return e=this.view.$image.get(0).getBoundingClientRect(),i=s.pageX-e.left,n=s.pageY-e.top,r.x=i-window.pageXOffset,r.y=n-window.pageYOffset,r},t._instance=new t,t}();function r(t,e,i){var n,r,s,o=null;if(!e){var a=jQuery('<div class="sf-frame-imgDetail"></i></div>');o=jQuery('<span class="sf-imgDetail-open"><i class="sf-icon-resize-full-2"></i></span>'),a.append(o),a.insertBefore(t),t.appendTo(a)}n=t,r=i,0<(s=o||n).length&&s.get(0).addEventListener("click",function(t){return c.getInstance().zoom(n.attr("src"),r)},!1)}e.imageDetailFactory=function(n){jQuery(".sf-imgDetail").each(function(t,e){var i=jQuery(e);r(i,i.hasClass("sf-noicon"),n)})}}),t("w-siteFactory",["require","exports","calendar/controller","slideShow/controller","helpers/message","tabsection/controller","imageZoom/controller","listes/controller","responsiveTopnav/controller","imageDetail/controller"],function(t,e,i,n,r,s,o,a,c,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calendarFactory=function(){i.calendarFactory()},e.calendar=function(t){return i.calendar(t)},e.slideShowFactory=function(){n.slideShowFactory()},e.slideShow=function(t){n.slideShow(t)},e.info=function(t){r.showInfo(t)},e.error=function(t,e){r.showError(t,e)},e.panelSectionFactory=function(t){s.panelSectionFactory(t)},e.linkSectionFactory=function(t,e){var i=e||{postion:"center,center"};i.position=i.position?i.position:"center,center",s.linkSectionFactory(t,i)},e.imageZoomFactory=function(t){o.imageZoomFactory(t)},e.listFolder=function(){a.listFolder()},e.responsiveTopNavFactory=function(t){c.responsiveTopNavFactory(t)},e.responsiveTopNav=function(t,e){c.responsiveTopNav(t,e)},e.imageDetailFactory=function(t){l.imageDetailFactory(t)}}),Object.keys(r).map(function(t){return r[t]}).forEach(i),null!==n?n.exports:void 0}();